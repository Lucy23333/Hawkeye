<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>HUD</title><style>body{margin:0;background:#000;overflow:hidden;font-family:monospace;color:#00f3ff}video{position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;z-index:1}.hud-layer{position:absolute;top:0;left:0;width:100%;height:100%;z-index:10;pointer-events:none}.crosshair{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:200px;height:200px;border:1px solid rgba(0,243,255,0.3);border-radius:50%}.crosshair::after{content:'';position:absolute;top:50%;left:50%;width:4px;height:4px;background:#ff2a6d;transform:translate(-50%,-50%);box-shadow:0 0 10px #ff2a6d}.status-bar{position:absolute;top:20px;left:20px;font-size:12px;line-height:1.5;text-shadow:0 0 5px #00f3ff}.rec-tag{position:absolute;top:20px;right:20px;color:#ff2a6d;font-weight:bold;animation:b 1s infinite;display:none;align-items:center;gap:5px}.rec-dot{width:10px;height:10px;background:#ff2a6d;border-radius:50%}.scan-btn{position:absolute;bottom:40px;left:50%;transform:translateX(-50%);width:70px;height:70px;background:rgba(0,0,0,0.5);border:2px solid #00f3ff;border-radius:50%;display:flex;align-items:center;justify-content:center;z-index:20;pointer-events:auto}.scan-inner{width:50px;height:50px;background:#00f3ff;border-radius:50%}.scan-btn.active .scan-inner{background:#ff2a6d;animation:p 1s infinite}
/* Snapshot Button */
.snap-btn{position:absolute;bottom:50px;right:40px;width:60px;height:60px;border:2px solid #fff;border-radius:50%;z-index:20;pointer-events:auto;background:rgba(255,255,255,0.1);display:flex;align-items:center;justify-content:center;cursor:pointer}.snap-btn:active{background:rgba(255,255,255,0.4)}
@keyframes b{50%{opacity:0}}@keyframes p{0%{transform:scale(1)}50%{transform:scale(0.8)}100%{transform:scale(1)}}</style></head><body><video id="video" autoplay playsinline muted></video><div class="hud-layer"><div class="crosshair"></div><div class="status-bar">ID: <span id="did">CAM-01</span><br>NET: 5G<br>STREAM: <span id="fps">0</span> FPS</div><div class="rec-tag" id="recTag"><div class="rec-dot"></div> LIVE</div></div>
<div class="scan-btn" id="btn"><div class="scan-inner"></div></div>
<div class="snap-btn" id="snapBtn" onclick="snapshot()">ðŸ“¸</div> <canvas id="canvas" style="display:none"></canvas><script>const v=document.getElementById('video'),b=document.getElementById('btn'),r=document.getElementById('recTag'),c=document.getElementById('canvas');let t=null;
const urlParams=new URLSearchParams(window.location.search);const devId=urlParams.get('id')||'CAM-01';document.getElementById('did').innerText=devId;
if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){navigator.mediaDevices.getUserMedia({video:{facingMode:'environment'}}).then(s=>v.srcObject=s).catch(e=>console.log(e))}
b.onclick=()=>{if(t){clearInterval(t);t=null;b.classList.remove('active');r.style.display='none'}else{t=setInterval(streamCap,200);b.classList.add('active');r.style.display='flex';streamCap()}};
//Streaming (No Save)
function streamCap(){c.width=v.videoWidth;c.height=v.videoHeight;c.getContext('2d').drawImage(v,0,0);c.toBlob(blob=>{const f=new FormData();f.append('image',blob,'stream.jpg');f.append('device_id',devId);f.append('mode','stream');fetch('/upload',{method:'POST',body:f})},'image/jpeg',0.5)}
//Snapshot (Save)
function snapshot(){c.width=v.videoWidth;c.height=v.videoHeight;c.getContext('2d').drawImage(v,0,0);c.toBlob(blob=>{const f=new FormData();f.append('image',blob,'evidence.jpg');f.append('device_id',devId);fetch('/upload',{method:'POST',body:f}).then(()=>{const fl=document.createElement('div');fl.style.cssText='position:fixed;top:0;left:0;width:100%;height:100%;background:#fff;z-index:99;opacity:0.8;transition:0.2s';document.body.appendChild(fl);setTimeout(()=>fl.style.opacity=0,50);setTimeout(()=>fl.remove(),250);})},'image/jpeg',0.9)}
</script></body></html>